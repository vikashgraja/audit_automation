<!DOCTYPE html>

{% load static %}

<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8">
    <title>Audit Hub</title>
    <link rel="shortcut icon" href="{% static 'css/img/favicon.png' %}">
</head>

<body>
    <link rel="stylesheet" href="{% static 'css/nav.css' %}">
    <nav>
        <div class="nav-content">
            <div class="logo">
                <img src="{% static 'css/img/logo__hyundai--light.svg' %}" alt="Logo">
                <a>AUDIT HUB</a>
            </div>
            <div class="menu-toggle" id="mobile-menu">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
            <div class="nav-links-wrapper">
                <ul class="nav-links main-nav">
                    <li><a href="{% url 'home' %}">Dashboard</a></li>
                    <li><a href="{% url 'automation' %}">Automation</a></li>
                    <li><a href="{% url 'tools' %}">Tools</a></li>
                    <li><a href="{% url 'learn' %}">Learn</a></li>
                    <li><a href="#">Audits</a></li>
                    {% if user.is_superuser %}
                    <li><a href="{% url 'user_list' %}">Users</a></li>
                    {% endif %}
                </ul>
                <ul class="nav-links user-nav">
                    <li><a href="{% url 'password' %}">Change Password</a></li>
                    <li><a href="{% url 'logout' %}">Logout</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <script>
        document.getElementById('mobile-menu').addEventListener('click', function () {
            document.querySelector('.nav-links-wrapper').classList.toggle('active');
            this.classList.toggle('is-active');
        });
    </script>
    <!--  <section class="home"></section>-->

    <div class="content">
        {% if messages %}
        <ul class="messages">
            {% for message in messages %}
            <li class="message {{ message.tags }}">{{ message }}</li>
            {% endfor %}
        </ul>
        <script>
            // Auto-dismiss messages after 3 seconds
            setTimeout(function () {
                const messages = document.querySelectorAll('.message');
                messages.forEach(function (msg) {
                    // Slide out animation
                    msg.style.transform = 'translateX(120%)';
                    msg.style.opacity = '0';

                    // Wait for transition to finish before removing
                    setTimeout(function () {
                        msg.remove();
                        // Remove container if empty
                        const container = document.querySelector('.messages');
                        if (container && container.children.length === 0) {
                            container.remove();
                        }
                    }, 400); // 400ms matches CSS transition duration
                });
            }, 3000);
        </script>
        {% endif %}
        {% block content %}
        {% endblock %}
    </div>

</body>

</html>
